### 什么是WAF ###

---
waf是web应用防护系统的简称（也称为：网站应用级入侵防御系统。英文：WebApplicationFirewall，简称WAF）。利用国际公认
的一种方法：web应用防火墙是通过执行一系列针对HTTP/HTTPS的安全策略来专门为web应用提供的一种产品。


<b>背景-目的</b>
随着互联网技术与应用的不断发展，新的互联网业务增长点与商业模式不断产生，已深入到社会经济，政治等各个层面。因此，
各类组织面临的web应用越来越复杂，安全问题以及衍生出的维护，管理问题也日益突出。

目前针对web的攻击：主要包括黑客攻击，蠕虫病毒，以及各种混合攻击，其对信息网络和核心业务造成严重破坏

<b>web难以防御的攻击</b>
Web应用安全问题本质上源于软件质量问题。Web应用安全，理想情况下应该在软件开发生命周期遵循安全编码原则，并在各阶段采取相应的安全措施。但Web应用较传统的软件，具有其独特性。主要体现在：

```
1 Web应用往往是某个机构所独有的应用，对其存在的漏洞，已知的通用漏洞签名缺乏有效性；
2 代码频繁地变更以满足业务目标，从而使得很难维持有序的开发周期；需要全面考虑客户端与服务端的复杂交互场景，而往往很多开发者没有很好地理解业务流程；
3 人们通常认为Web 开发比较简单，缺乏经验的开发者也可以胜任。
此外，内部维护人员疲于应付Web应用安全漏洞的补救，但是由于Web安全问题的解决步伐往往明显滞后于发现问题，这将导致Web安全漏洞在一定时间处于真空期，危害有可能被放大，主要原因在于：
1 低效的安全防御策略；
2 应用层代码的补丁往往需要严格的流程测试、审查，需要一定的周期；
3 漏洞往往会衍生变种；
4 难以抵抗零日攻击。
```
所有这些均严重挑战了Web应用安全。

<b>web安全手段</b>
传统的防火墙工作在网络层，这种方式对应web没有任何防护。
ID/IPS作为防火墙的有利补充，加强了web的安全防御能力。但是IDS/IPS需要预先构造攻击特征库来匹配网络数据，
技术本来就存在一定的局限性。

与传统防火墙以及IDS/IPS不同，新起的安全设备web应用防火墙工作在应用层，对web防护具有先天的技术优势

<b>web应用防火墙技术</b>

        WAF旨在保护Web应用程序免受常见攻击的威胁。Gartner的分析师表示，“这是一种非常不同的技术，它不是基于签名，而是从行为来分析，它能够帮助减少你自己无意中可能制造的漏洞问题”。Web应用防火墙的最大好处是，帮助分析应用层的流量以发现任何违法安全政策的安全问题。

WAF在网络中一般位于Web应用服务器前，用于保护防火墙之后的应用服务器。它提供的功能可能包括服务器之间的流量负载均衡、压缩、加密、HTTP和HTTPS流量的反向代理、检查应用程序的一致性和汇聚TCP会话等。

WAF一般均采用反向代理技术和虚拟主机技术原理，其工作流程大体如下（参考图2）：将受保护的Web服务器建立虚拟主机，对于每一个虚拟主机提供相应的安全策略来进行保护。同时把Web应用防火墙配置为反向代理服务器，用于代理Web服务器对外部网络的连接请求。当Web应用防火墙能够代理外部网络上的主机访问内部Web服务器的时候，Web应用防火墙对外就表现为一个Web服务器。它负责把外部网络上的请求转发给内部的应用服务器，然后再把内部响应的数据返回给外部网络。Web应用防火墙没有保存任何内部服务器的真实数据，所有的静态网页或者CGI程序，都保存在内部的Web服务器上。因此对Web应用防火墙的攻击并不会使得网页信息遭到破坏，这样就增强了Web服务器的安全性。

