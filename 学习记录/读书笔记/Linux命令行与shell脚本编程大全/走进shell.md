## 走进shell ##
时间：2019/5/29 20:56
### 终端模拟 ###
在图形化桌面出现之前，和Unix系统唯一交互的方式就是通过shell提供的文本命令行界面（CIL，Command Line Interface）。CIL只允许输入文本，而且只能显示文本和低级图形输出。

由于这个限制，输出设备不必非常好。通常一个简单的哑终端就是Unix系统交互所需要的所有设备。哑终端(dumb terminal)通常是由通信电缆（通常是多线串行电缆，也叫带状电缆）连接到Unix系统上的显示器和键盘（尽管后来鼠标的出现多多少少改善了这种状况）。这个简单的组合提供了向Unix系统输入文本数据和显示文本结果的一条捷径。

进入Linux控制台有两种方法：
1. 退出图形化桌面模式，进入CIL（修改/etc/inittab里的3改为5，或Ctrl+Alt+F2建进入CIL）
2. 使用图形化Linux桌面环境里的终端模拟包

第一种方法的参考文章：[参考](https://wenku.baidu.com/view/bfe8cb48f01dc281e53af04e.html)

## 图形功能与终端模拟的组成 ##
所有的终端都必须在屏幕上显示字符（否则：文本模式就没有意义了）。关键是要显示什么样的字符以及Linux系统需要发送什么样的代码来显示他们

终端模拟组成的几种：
```
字符集：字符编码，如：ASCII编码、ISO-8859-2编码来显示输入的字符
控制码：用于显示键盘上的特殊功能，如：F1-F8、换行、上下左右、上翻和下翻、移动制定数目的空格
块模式图形：显示图形用的，不能显示特殊字符的图形
矢量图形：块模式图形的进化
显示缓冲：图形显示，终端显示，缓冲一个完全独立的显示窗口，滚动区域
色彩：终端上的颜色
```
键盘的特殊组合：
```
Ctrl+C键-中断程序
Ether键-代表一个命令的结束
Ctrl+Shift+C键-复制
Ctrl+Shift+V键-粘贴
Delete、Backspace键-删除当行字符
方向键-上下左右
功能键-F1到F12键
```

## terminfo数据库 ##
既然知道了终端的不同类型，需要一个途径来让Linux系统知道你模拟的是那个终端。Linux需要知道在和终端模拟器通信时使用那些控制码，这是通过使用一个环境变量和一组称为terminfo数据库的特殊文件实现的

PS:terminfo文件是个二进制文件,它是编译文本文件的结果。这个文本文件含有定义屏幕功能的代码字，以及在终端上实现这个功能所需的的控制码

terminfo条母定义了终端名（本列vt100），以及可以跟终端名关联起来的所有别名

terminfo数据库文件位置：/usr/share/terminfo
![](https://s2.ax1x.com/2019/05/30/VKNcAs.png)

字母和数字对应终端首个字符，查看自己终端模拟的命令：echo $TERM
![](https://s2.ax1x.com/2019/05/30/VKNO9x.png)

使用infocmp查看自己的终端
![](https://s2.ax1x.com/2019/05/30/VKNzuD.png)

进入到terminfo文件里，进入对应的终端使用infocmp [终端名]
![](https://s2.ax1x.com/2019/05/30/VKUPUA.png)

terminfo功能代码：
```
am--设置右侧自动边缘调整
msgr--以突出模式安全移动光标
xen1--忽略80列后的换行符
xon--终端使用XON/XOFF字符进程控制
cols#80--每行80列
it#8--制表符设为8个空格
lines#24--每屏24行
vt#3--虚拟终端为3
bel--用来模拟响铃的控制码
blink--用了生成闪烁文本的控制码
bold--用户生成加粗文本的控制码
clear--用来清空屏幕的控制码
cr--用户输入回车付的控制码
csr--用来修改滚动区域的控制码
cub--向左移动一个字符，但不擦除字符
cub1--将光标回退一格
cud--将光标下移一行
cud1--将光标下移一行的控制码
cuf--向右移动一个字符，但不擦除其他字符
cuf1--向右移动一个字符但不擦除其他字符的控制码
cup--移动到显示器的第一行第二列位置的控制码
cuu--将光标向上移动一行
cuu1--将光标向上移动一行的控制码
ed--清除屏幕底部的内容
el--清除到行尾的内容
el1--清除到行首的内容
enacs--启用备用字符集
home--用来将光标移动到起始位置
ht--制表符
hts--在每一行的当前列位置设置制表符
ind--向上滚动文本
kal--小键盘的左上键
ka3--小键盘的右上键
kb2--小键盘的中心键
kbs--退格键
kc1--小键盘的左下键
kc3--小键盘的右下键
kcub1--左方向键
kcud1--向下键
kcuf1--向右键
kent--Enter键
kf0--F0功能键
kf1--功能键
kf10--F10键
rc--将光标放回上次保存的位置
rev--反转图像模式
ri--向下滚动文本
rmacs--停用备用字符集
rmam--关闭自动边缘调整
rmkx--退出键盘发送模式
rmso--退出突出模式
rmul--退出下划线模式
rs2--重置
sc--保存当前光标的位置
sgr--定义图像属性
sgr0--关闭所有属性
smacs--启用备用字符集
smam--打开自动边缘调整
smkx--启用键盘发送模式
smso--启用突出模式
smul--启用下划线模式
tbc--清除所有制表位
```
不仅每个桌面有自己的个性菜单，终端也有。比如说我现在的xterm
使用xterm --help命令可以看到帮助
![](https://s2.ax1x.com/2019/05/30/VKf9lF.md.png)

xterm命令行参数详解:https://www.ibm.com/support/knowledgecenter/zh/ssw_aix_71/com.ibm.aix.cmds6/xterm.htm

每个不同类型的终端都有自己的菜单，这里就不详细说了

vt、Konsole菜单等等...

总结成一张图：
![](https://s2.ax1x.com/2019/05/30/VMFe41.png)
